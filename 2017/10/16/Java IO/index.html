<!DOCTYPE html>
<html lang="en">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">



  <meta name="description" content="Java IO"/>




  <meta name="keywords" content="Java基础, Corn1ng's Blog" />










  <link rel="alternate" href="/default" title="Corn1ng's Blog">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.6.0" />



<link rel="canonical" href="https://corn1ng.github.io/2017/10/16/Java IO/"/>


<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.6.0" />



  <link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css" />




  



  <script id="baidu_push">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>









    <title> Java IO - Corn1ng's Blog </title>\
    <style type="text/css">
    .content-wrapper:{top:200px;}
    .footer:{top:200px;}
    </style>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">Corn1ng's Blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            Home
          
        </li>
      </a>
    
      <a href="/archives/">
        <li class="mobile-menu-item">
          
          
            Archives
          
        </li>
      </a>
    
      <a href="/tags">
        <li class="mobile-menu-item">
          
          
            Tags
          
        </li>
      </a>
    
      <a href="/categories">
        <li class="mobile-menu-item">
          
          
            Categories
          
        </li>
      </a>
    
      <a href="/about">
        <li class="mobile-menu-item">
          
          
            About
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">Corn1ng's Blog</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              Home
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              Archives
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/tags">
            
            
              Tags
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/categories">
            
            
              Categories
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/about">
            
            
              About
            
          </a>
        </li>
      
    </ul>
  
</nav>

      </header>
      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          Java IO
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2017-10-16
        </span>
        
          <div class="post-category">
            
              <a href="/categories/Java/">Java</a>
            
          </div>
        
        
      </div>
    </header>

    
    
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">Contents</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#File"><span class="toc-text">File</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RandomAccessFile-类"><span class="toc-text">RandomAccessFile 类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#字节流于字符流基本操作"><span class="toc-text">字节流于字符流基本操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#字节流（主要操作byte-类型数据-InputStream-OutputStream）"><span class="toc-text">字节流（主要操作byte[]类型数据 InputStream OutputStream）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#字符流"><span class="toc-text">字符流</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#转换流-OutputStreamWriter-和InputStream-Reader"><span class="toc-text">转换流 OutputStreamWriter 和InputStream Reader</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#System类对IO的支持"><span class="toc-text">System类对IO的支持</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#System-out"><span class="toc-text">System.out</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#System-err"><span class="toc-text">System.err</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#System-in"><span class="toc-text">System.in</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#BufferedReader类"><span class="toc-text">BufferedReader类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Scanner-类"><span class="toc-text">Scanner 类</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#对象序列化"><span class="toc-text">对象序列化</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#并发编程网上的IO总结"><span class="toc-text">并发编程网上的IO总结</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Java-IO-ifeve-com"><span class="toc-text">Java IO (ifeve.com)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Java-IO-概述"><span class="toc-text">Java IO 概述</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#流"><span class="toc-text">流</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Java-IO-文件"><span class="toc-text">Java IO 文件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#通过IO-读文件"><span class="toc-text">通过IO 读文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#通过IO-写文件"><span class="toc-text">通过IO 写文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#随机存取文件"><span class="toc-text">随机存取文件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Java-IO-管道"><span class="toc-text">Java IO 管道</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Java-IO-网络"><span class="toc-text">Java IO 网络</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Java-IO-字节和字符数组"><span class="toc-text">Java IO 字节和字符数组</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#从inputstream-或者reader中读取数组。"><span class="toc-text">从inputstream 或者reader中读取数组。</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#从Outputstream-或者writer写数组"><span class="toc-text">从Outputstream 或者writer写数组</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Java-IO-流"><span class="toc-text">Java IO: 流</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#InputStream"><span class="toc-text">InputStream</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#outputstream"><span class="toc-text">outputstream</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#组合流"><span class="toc-text">组合流</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#reader"><span class="toc-text">reader</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#并发IO"><span class="toc-text">并发IO</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#异常处理"><span class="toc-text">异常处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Fileinputstream"><span class="toc-text">Fileinputstream</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FileOutputstream"><span class="toc-text">FileOutputstream</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#flush"><span class="toc-text">flush()</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#File-1"><span class="toc-text">File</span></a></li></ol>
    </div>
  </div>


    <div class="post-content">
      
        <p>Java 所有的文件操作类都在Java.io 包中。 注意五个类和一个接口。File OutputStream InputStream Writer Reader 一个接口是serializable</p>
<h3 id="File"><a href="#File" class="headerlink" title="File"></a>File</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">File</span><span class="params">(String pathname)</span><span class="comment">// file 类构造方法</span></span></span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p>要使用一个File类，需要传递一个文件路径</p>
<p><img src="http://blog-1252095801.cosgz.myqcloud.com/10122.png" alt="1"> </p>
<p>创建一个新文件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileDemo1</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        File f = <span class="keyword">new</span> File(<span class="string">"D:\\test.txt"</span>);</span><br><span class="line">      <span class="keyword">try</span></span><br><span class="line">      &#123;</span><br><span class="line">          f.createNewFile();</span><br><span class="line">        <span class="comment">//if(f.exists())   judge exist</span></span><br><span class="line">        <span class="comment">//f.delete() 删除文件</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">catch</span>(IOException e)</span><br><span class="line">      &#123;</span><br><span class="line">          e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;<span class="comment">// windows 使用\ 表示目录</span></span><br><span class="line"><span class="comment">// linux 使用/ 表示目录</span></span><br></pre></td></tr></table></figure>
<p>创建文件夹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">File f = <span class="keyword">new</span> File(<span class="string">"/home/brett/java/io"</span>);</span><br><span class="line">f.mkdir() &amp;&amp; f.mkdirs()</span><br></pre></td></tr></table></figure>
<h3 id="RandomAccessFile-类"><a href="#RandomAccessFile-类" class="headerlink" title="RandomAccessFile 类"></a>RandomAccessFile 类</h3><p>要对文件内容进行操作，使用randomAccessFile类。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RandomAccessFile</span> <span class="keyword">implements</span> <span class="title">DataOutput</span>, <span class="title">DataInput</span>, <span class="title">Closeable</span> </span></span><br><span class="line"><span class="class"></span>&#123;<span class="comment">//下面是常用API.	</span></span><br><span class="line"><span class="comment">//两个构造函数,指定操作文件.</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">RandomAccessFile</span><span class="params">(String name, String mode)</span></span></span><br><span class="line"><span class="function">  <span class="keyword">public</span> <span class="title">RandomAccessFile</span><span class="params">(File file, String mode)</span></span></span><br><span class="line"><span class="function">  </span></span><br><span class="line"><span class="function">  <span class="keyword">public</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span></span><br><span class="line"><span class="function">  <span class="keyword">public</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">(<span class="keyword">byte</span> b[], <span class="keyword">int</span> off, <span class="keyword">int</span> len)</span> <span class="keyword">throws</span> IOException </span></span><br><span class="line"><span class="function">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">(<span class="keyword">int</span> b)</span> <span class="keyword">throws</span> IOException</span></span><br><span class="line"><span class="function">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">(<span class="keyword">byte</span> b[])</span> <span class="keyword">throws</span> IOException</span></span><br><span class="line"><span class="function">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">seek</span><span class="params">(<span class="keyword">long</span> pos)</span> <span class="keyword">throws</span> IOException <span class="comment">//设置读指针的位置</span></span></span><br><span class="line"><span class="function">  <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">byte</span> <span class="title">readByte</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span></span><br><span class="line"><span class="function">   <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">readInt</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span></span><br><span class="line"><span class="function">&#125;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">random_access_file</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">//写操作</span></span><br><span class="line">        File f =<span class="keyword">new</span> File(<span class="string">"2.txt"</span>);<span class="comment">//指定要操作的文件</span></span><br><span class="line">        RandomAccessFile rdf =<span class="keyword">new</span> RandomAccessFile(f,<span class="string">"rw"</span>);<span class="comment">// 读写方式打开文件,会自动创建新文件</span></span><br><span class="line">        String name =<span class="string">"wkn     "</span>;</span><br><span class="line">        <span class="keyword">int</span> age = <span class="number">23</span>;</span><br><span class="line">        rdf.writeBytes(name);</span><br><span class="line">        rdf.write(<span class="number">23</span>);</span><br><span class="line">        rdf.close();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//读操作</span></span><br><span class="line">        File f1 =<span class="keyword">new</span> File(<span class="string">"2.txt"</span>);</span><br><span class="line">        RandomAccessFile rdf2 =<span class="keyword">new</span> RandomAccessFile(f1,<span class="string">"r"</span>);</span><br><span class="line">        <span class="keyword">byte</span>[] b =<span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">8</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;b.length;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            b[i]=rdf2.readByte();</span><br><span class="line">        &#125;</span><br><span class="line">        String name1 =<span class="keyword">new</span> String(b);</span><br><span class="line">        System.out.printf(name1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> String s = <span class="string">"wkn123王康宁"</span>;<span class="comment">//String变量</span></span><br><span class="line"> <span class="keyword">byte</span> b[] = s.getBytes();<span class="comment">//String转换为byte[]</span></span><br><span class="line"> <span class="keyword">for</span>(<span class="keyword">byte</span> b1:b)</span><br><span class="line"> &#123;</span><br><span class="line">     System.out.println(b1);</span><br><span class="line"> &#125;</span><br><span class="line"> String t = <span class="keyword">new</span> String(b);<span class="comment">//byte[]转换为String</span></span><br><span class="line"> System.out.println(t);</span><br><span class="line"><span class="comment">// 所有字符都是以byte[]数组的形式传递的，默认utf8</span></span><br><span class="line"><span class="comment">// 英语和数字都是原来的ascll(utf8的英语数字和ascll一样)</span></span><br><span class="line"><span class="comment">// 其他字符可能是不同的编码，比如汉字就是三个数字一个编码。</span></span><br><span class="line"><span class="comment">//所以任何字符串都是可以转换为byte[]的形式的，</span></span><br><span class="line"><span class="comment">//byte[]也可以再转换为字符串。</span></span><br><span class="line"><span class="comment">// 一切“字符”都必定用数字+编码表表示</span></span><br><span class="line"><span class="comment">//当用UTF-8时表示一个字符是可变的,有可能是用一个字节表示一个字符,也可能是两个,三个.当然最多不能超过3个字节了.反正是根据字符对应的数字大小来确定.</span></span><br></pre></td></tr></table></figure>
<p>可以参考<a href="http://www.cnblogs.com/fuzhaoyang56/archive/2013/05/24/3096471.html" target="_blank" rel="noopener">http://www.cnblogs.com/fuzhaoyang56/archive/2013/05/24/3096471.html</a></p>
<hr>
<h3 id="字节流于字符流基本操作"><a href="#字节流于字符流基本操作" class="headerlink" title="字节流于字符流基本操作"></a>字节流于字符流基本操作</h3><p>在程序中所有的数据都是以流的方式进行传输或者保存的，程序需要数据时要使用输入流读取数据，而当程序需要将一些数据保存起来时，就要使用输出流。</p>
<p><img src="http://blog-1252095801.cosgz.myqcloud.com/10123.png" alt="1"></p>
<p>io 包中流的操作主要有字节流，字符流两大类，两类都有输入和输出操作，在字节流中输出数据主要使用OutputStream 类完成，输入使用的是InputStream 类。在字符流中输出主要使用Writer类完成，输入主要使用Reader类完成。</p>
<p>操作流程如下</p>
<ul>
<li>使用file类打开一个文件</li>
<li>通过字节流或者字符流的子类指定输出的位置</li>
<li>进行读写操作</li>
<li>关闭输入输出<br>流在实例化的时候都需要传进去一个文件对象，表示流到哪或者从哪里流。<h4 id="字节流（主要操作byte-类型数据-InputStream-OutputStream）"><a href="#字节流（主要操作byte-类型数据-InputStream-OutputStream）" class="headerlink" title="字节流（主要操作byte[]类型数据 InputStream OutputStream）"></a>字节流（主要操作byte[]类型数据 InputStream OutputStream）</h4></li>
</ul>
<p>OutputStream 是整个IO包中字节输出流的最大父类，定义如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> abstruct <span class="class"><span class="keyword">class</span> <span class="title">OutputStream</span> <span class="keyword">extends</span> <span class="title">Object</span> <span class="keyword">implements</span> <span class="title">Closeable</span>, <span class="title">Flushable</span>// 抽象类</span></span><br><span class="line"><span class="class">里面主要定义了一个抽象方法,<span class="title">write</span>().</span></span><br></pre></td></tr></table></figure>
<p>InputStream 是整个IO包中字节输入流的最大父类，定义如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> abstruct <span class="class"><span class="keyword">class</span> <span class="title">InputStream</span> <span class="keyword">extends</span> <span class="title">Object</span> <span class="keyword">implements</span> <span class="title">Closeable</span>, <span class="title">Flushable</span>// 抽象类</span></span><br><span class="line"><span class="class">里面主要定义了一个抽象方法,<span class="title">read</span>().</span></span><br></pre></td></tr></table></figure>
<h3 id="字符流"><a href="#字符流" class="headerlink" title="字符流"></a>字符流</h3><p>在程序中一个字符相当于两个字节，Java提供了Reader 和Writer 两个专门操作字符流的类。</p>
<p>Writer 与outputStream 的操作流程并没有什么太大的去别，唯一的好处是，可以直接输出字符串，而不用将字符串变为byte[]数组之后再输出。Reader和Inputstream 也是类似。</p>
<p><em>reader inputstream 都是从文件（或其他）取数据 writer outputstream 往文件（或其他）写入数据</em></p>
<p>字节流在操作时本身不会用到缓冲区，是文件本身直接操作的，而字符流在操作时使用了缓冲区，通过缓冲区再进行操作文件。<strong>所以字节流操作时不关闭也会有输入输出,字符流就不行,如果不关闭的话,就都在缓冲区里</strong></p>
<h5 id="转换流-OutputStreamWriter-和InputStream-Reader"><a href="#转换流-OutputStreamWriter-和InputStream-Reader" class="headerlink" title="转换流 OutputStreamWriter 和InputStream Reader"></a>转换流 OutputStreamWriter 和InputStream Reader</h5><p>这两个流都是转换流。</p>
<p>outputStreamWriter 是writer的子类，将一个字符流的输出对象变为字节流输出对象。</p>
<p>inputStreamReader 是reader的子类，将一个字节流的输入对象变为字符流的输入对象。</p>
<h4 id="System类对IO的支持"><a href="#System类对IO的支持" class="headerlink" title="System类对IO的支持"></a>System类对IO的支持</h4><p>System类定义了三个常量,</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> PrintStream out<span class="comment">// 对应系统标准输出,一般是显示器</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> PrintStream err<span class="comment">//错误信息输出</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> InputStream in <span class="comment">// 对应标准输入,一般是键盘</span></span><br></pre></td></tr></table></figure>
<h4 id="System-out"><a href="#System-out" class="headerlink" title="System.out"></a>System.out</h4><p>System.out 是printStream的对象,在printStream 中定义了一系列print()和println()方法,printStream 又是OutputStream的子类.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">OutputStream out = System.out;</span><br><span class="line">out.write(<span class="string">"Helo"</span>.getBytes());</span><br></pre></td></tr></table></figure>
<h4 id="System-err"><a href="#System-err" class="headerlink" title="System.err"></a>System.err</h4><p>System.err 表示的是错误信息输出,如果程序出现错误,可以直接使用System.err 进行输出.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span></span><br><span class="line">&#123;</span><br><span class="line">    System.out.print(<span class="string">"hhh"</span>)</span><br><span class="line">&#125;<span class="keyword">catch</span> (Exception e)</span><br><span class="line">&#123;</span><br><span class="line">    System.err.println(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="System-in"><a href="#System-in" class="headerlink" title="System.in"></a>System.in</h4><p><strong>System.in 实际上是一个键盘的输入流,其本身是InputStream类型的对象,那么此时就可以利用System.in 完成从键盘读取数据的功能.</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">InputStream input =System.in;</span><br><span class="line"><span class="keyword">byte</span>[] b = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line"><span class="keyword">int</span> len = input.read(b);</span><br><span class="line">System.out.println(<span class="keyword">new</span> String(b,<span class="number">0</span>,len));</span><br><span class="line"><span class="comment">//此方法不常用,因为要提前申请,更好的方法是将全部输入暂存到内存的一块地方,然后一次性从内存中读取数据</span></span><br></pre></td></tr></table></figure>
<h4 id="BufferedReader类"><a href="#BufferedReader类" class="headerlink" title="BufferedReader类"></a>BufferedReader类</h4><p>BufferedReader 类用于从缓冲区读取内容,所有的输入字节数据都将放在缓冲区中.详见github IO</p>
<h4 id="Scanner-类"><a href="#Scanner-类" class="headerlink" title="Scanner 类"></a>Scanner 类</h4><p>JDK1.5后提供了专门的输入数据类,不只可以完成输入数据操作,也可以方便的对输入数据进行验证.</p>
<p>Scanner 可以接收任意的输入流.</p>
<h3 id="对象序列化"><a href="#对象序列化" class="headerlink" title="对象序列化"></a>对象序列化</h3><p>对象序列化是把一个对象变为二进制的数据流的一种方法，通过序列化可以方便的实现对象的传输或者存储。如果一个类想被序列化，则对象所在的类必须实现 Java.io.serializable 接口， 此接口没有定义任何的方法，所以此接口是一个标识接口，表示一个类具备了被序列化的能力。</p>
<h1 id="并发编程网上的IO总结"><a href="#并发编程网上的IO总结" class="headerlink" title="并发编程网上的IO总结"></a>并发编程网上的IO总结</h1><h1 id="Java-IO-ifeve-com"><a href="#Java-IO-ifeve-com" class="headerlink" title="Java IO (ifeve.com)"></a>Java IO (ifeve.com)</h1><p>Java.io包主要包括文件，网络数据流，内存缓冲等的输入输出。（从CPU的角度来看输入输出）。</p>
<h3 id="Java-IO-概述"><a href="#Java-IO-概述" class="headerlink" title="Java IO 概述"></a>Java IO 概述</h3><p>Java IO 主要关注的是从原始数据源的读取以及输出原始数据到目标媒介。原始的数据源包括了 文件，管道，网络连接，内存缓存。</p>
<h5 id="流"><a href="#流" class="headerlink" title="流"></a>流</h5><p>Java IO中，流从概念上说是一个连续的数据流，既可以从流总读取数据，也可以从流中写数据。 Java中流可以是字节流，也可以是字符流。</p>
<p>一个程序需要InputStream 或者reader 从数据源读取数据，需要outputstream 或者writer 将数据写到目标媒介中。</p>
<h3 id="Java-IO-文件"><a href="#Java-IO-文件" class="headerlink" title="Java IO 文件"></a>Java IO 文件</h3><h5 id="通过IO-读文件"><a href="#通过IO-读文件" class="headerlink" title="通过IO 读文件"></a>通过IO 读文件</h5><p>根据该文件是二进制文件还是文本文件来选择使用FileInputStream或者FileReader。这两个类允许你从文件开始到文件末尾一次读取一个字节或者字符。或者将读取到的字节或字符写到数组里。</p>
<h5 id="通过IO-写文件"><a href="#通过IO-写文件" class="headerlink" title="通过IO 写文件"></a>通过IO 写文件</h5><p>如果需要在不同端之间写文件，根据你要写入的数据是二进制型数据还是字符型数据选用FileOutputStream或者FileWriter。</p>
<h5 id="随机存取文件"><a href="#随机存取文件" class="headerlink" title="随机存取文件"></a>随机存取文件</h5><p>通过RandomAccessFile对文件进行随机存取。</p>
<h3 id="Java-IO-管道"><a href="#Java-IO-管道" class="headerlink" title="Java IO 管道"></a>Java IO 管道</h3><p>Java IO中的管道为运行在同一个JVM中的两个线程提供了通信的能力。所以管道也可以作为数据源以及目标媒介。</p>
<h3 id="Java-IO-网络"><a href="#Java-IO-网络" class="headerlink" title="Java IO 网络"></a>Java IO 网络</h3><p>当两个进程之间建立了网络连接之后，他们通信的方式如同操作文件一样：利用InputStream读取数据，利用OutputStream写入数据。换句话来说，Java网络API用来在不同进程之间建立网络连接，而Java IO则用来在建立了连接之后的进程之间交换数据。</p>
<h3 id="Java-IO-字节和字符数组"><a href="#Java-IO-字节和字符数组" class="headerlink" title="Java IO 字节和字符数组"></a>Java IO 字节和字符数组</h3><h5 id="从inputstream-或者reader中读取数组。"><a href="#从inputstream-或者reader中读取数组。" class="headerlink" title="从inputstream 或者reader中读取数组。"></a>从inputstream 或者reader中读取数组。</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">byte</span>[] bytes  = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">把数据写入数组</span><br><span class="line">InputStream  InputStream = <span class="keyword">new</span> InputStream(bytes);</span><br><span class="line"><span class="comment">// 读取一个字节</span></span><br><span class="line"><span class="keyword">int</span> data = InputStream.read();</span><br><span class="line"><span class="comment">//读取下一个字节</span></span><br><span class="line"><span class="keyword">int</span> data2 = InputStream.read();</span><br></pre></td></tr></table></figure>
<p>同样的方式也可以读取字符数组，把字符数组封装在charArrayReader上就行。</p>
<h5 id="从Outputstream-或者writer写数组"><a href="#从Outputstream-或者writer写数组" class="headerlink" title="从Outputstream 或者writer写数组"></a>从Outputstream 或者writer写数组</h5><p>同样，也可以把数据写到ByteArrayOutputStream或者CharArrayWriter中。你只需要创建ByteArrayOutputStream或者CharArrayWriter，把数据写入。</p>
<p>当所有的数据都写进去了以后，只要调用toByteArray()或者toCharArray，所有写入的数据就会以数组的形式返回。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">OutputStram output =  <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line">output.write(<span class="string">"this is a text"</span>.toBytes(<span class="string">'UTF-8'</span>));</span><br><span class="line"><span class="keyword">byte</span>[] bytes = output.toByteArray();</span><br></pre></td></tr></table></figure>
<h3 id="Java-IO-流"><a href="#Java-IO-流" class="headerlink" title="Java IO: 流"></a>Java IO: 流</h3><p>流和数组不一样，不能通过索引读写数据，在流中，也不能像数组那样前后移动读取数据，除非使用randomaccessFile 处理文件。流仅仅是一个连续的数据流。</p>
<h5 id="InputStream"><a href="#InputStream" class="headerlink" title="InputStream"></a>InputStream</h5><p>InputStream 是所有JavaIO  输入流的基类，通常使用输入流中的read()方法读取数据，read方法返回一个整数，代表了读取到的字节的内容，当到达流的末尾没有更多数据可以读时，返回-1</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">InputStream input = <span class="keyword">new</span> FileInputStream(<span class="string">"c:\\data\\input-file.txt"</span>);</span><br><span class="line"><span class="keyword">int</span> data = input.read(); </span><br><span class="line"><span class="keyword">while</span>(data != -<span class="number">1</span>)&#123;</span><br><span class="line">        data = input.read();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="outputstream"><a href="#outputstream" class="headerlink" title="outputstream"></a>outputstream</h5><p>OutputStream是Java IO中所有输出流的基类.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">OutputStream output = <span class="keyword">new</span> FileOutputStream(<span class="string">"c:\\data\\output-file.txt"</span>);</span><br><span class="line">output.write(<span class="string">"Hello World"</span>.getBytes());</span><br><span class="line">output.close();</span><br></pre></td></tr></table></figure>
<h5 id="组合流"><a href="#组合流" class="headerlink" title="组合流"></a>组合流</h5><p>可以将流整合起来以便实现更高级的输入和输出操作。比如，一次读取一个字节是很慢的，所以可以从磁盘中一次读取一大块数据，然后从读到的数据块中获取字节。为了实现缓冲，可以把InputStream包装到BufferedInputStream中。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">InputStream input = <span class="keyword">new</span> BufferedInputStream(<span class="keyword">new</span> FileInputStream(<span class="string">"c:\\data\\input-file.txt"</span>));</span><br></pre></td></tr></table></figure>
<h5 id="reader"><a href="#reader" class="headerlink" title="reader"></a>reader</h5><p>Reader类是Java IO中所有Reader的基类。子类包括BufferedReader，PushbackReader，InputStreamReader，StringReader和其他Reader.这并不意味着Reade只会从数据源中一次读取2个字节，Reader会根据文本的编码，一次读取一个或者多个字节。</p>
<h3 id="并发IO"><a href="#并发IO" class="headerlink" title="并发IO"></a>并发IO</h3><p>在同一时刻不能有多个线程同时InputStream 或者 Reader 中读取数据，也不能同时往outputStream 或者writer里写数据，你没有办法保证每个线程读取多少数据，以及多个线程写数据时的顺序。</p>
<h3 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h3><p>流与reader writer 使用结束的时候，需要正确的关闭它们，通常调用close() </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">InputStream input = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    input = <span class="keyword">new</span> FileInputStream(<span class="string">"c:\\data\\input-text.txt"</span>);</span><br><span class="line">    <span class="keyword">int</span> data = input.read();</span><br><span class="line">    <span class="keyword">while</span>(data != -<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="comment">//do something with data...</span></span><br><span class="line">        doSomethingWithData(data);</span><br><span class="line">        data = input.read();</span><br><span class="line">&#125;</span><br><span class="line">&#125;<span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line">    <span class="comment">//do something with e... log, perhaps rethrow etc.</span></span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(input != <span class="keyword">null</span>)</span><br><span class="line">            input.close();</span><br><span class="line">    &#125; <span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line">        <span class="comment">//do something, or ignore.</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Fileinputstream"><a href="#Fileinputstream" class="headerlink" title="Fileinputstream"></a>Fileinputstream</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">InputStream input = <span class="keyword">new</span> FileInputStream(<span class="string">"c:\\data\\input-text.txt"</span>);</span><br><span class="line"><span class="keyword">int</span> data = input.read();<span class="keyword">while</span>(data != -<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="comment">//do something with data...</span></span><br><span class="line">    doSomethingWithData(data);</span><br><span class="line">    data = input.read();</span><br><span class="line">&#125;</span><br><span class="line">input.close();</span><br><span class="line"><span class="comment">//中一个FileInputStream构造函数取一个File对象替代String对象作为参数。这里是一个使用该构造函数的例子：</span></span><br><span class="line">File file = <span class="keyword">new</span> File(<span class="string">"c:\\data\\input-text.txt"</span>);</span><br><span class="line">InputStream input = <span class="keyword">new</span> FileInputStream(file);</span><br></pre></td></tr></table></figure>
<p>FileInputStream的read()方法返回读取到的包含一个字节内容的int变量(译者注：0~255)。如果read()方法返回-1，意味着程序已经读到了流的末尾，此时流内已经没有多余的数据可供读取了，你可以关闭流。-1是一个int类型，不是byte类型，这是不一样的。</p>
<h3 id="FileOutputstream"><a href="#FileOutputstream" class="headerlink" title="FileOutputstream"></a>FileOutputstream</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">OutputStream output = <span class="keyword">new</span> FileOutputStream(<span class="string">"c:\\data\\output-text.txt"</span>);</span><br><span class="line"><span class="keyword">while</span>(moreData) &#123;</span><br><span class="line">    <span class="keyword">int</span> data = getMoreData();</span><br><span class="line">    output.write(data);</span><br><span class="line">&#125;</span><br><span class="line">output.close();</span><br></pre></td></tr></table></figure>
<p>当你创建了一个指向已存在文件的FileOutputStream，你可以选择覆盖整个文件，或者在文件末尾追加内容。通过使用不同的构造函数可以实现不同的目的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">OutputStream output = <span class="keyword">new</span> FileOutputStream(<span class="string">"c:\\data\\output-text.txt"</span>);</span><br><span class="line">另外一个构造函数取<span class="number">2</span>个参数：文件名和一个布尔值，布尔值表明你是否需要覆盖文件。这是构造函数的例子：</span><br><span class="line">OutputStream output = <span class="keyword">new</span> FileOutputStream(<span class="string">"c:\\data\\output-text.txt"</span>, <span class="keyword">true</span>); <span class="comment">//appends to file </span></span><br><span class="line">OutputStream output = <span class="keyword">new</span> FileOutputStream(<span class="string">"c:\\data\\output-text.txt"</span>, <span class="keyword">false</span>); <span class="comment">//overwrites file</span></span><br></pre></td></tr></table></figure>
<h4 id="flush"><a href="#flush" class="headerlink" title="flush()"></a>flush()</h4><p>当你往FileOutputStream里写数据的时候，这些数据有可能会缓存在内存中。在之后的某个时间，比如，每次都只有X份数据可写，或者FileOutputStream关闭的时候，才会真正地写入磁盘。当FileOutputStream没被关闭，而你又想确保写入到FileOutputStream中的数据写入到磁盘中，可以调用flush()方法，该方法可以保证所有写入到FileOutputStream的数据全部写入到磁盘中。</p>
<h3 id="File-1"><a href="#File-1" class="headerlink" title="File"></a>File</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">File file = <span class="keyword">new</span> File(<span class="string">'/home/brett/2.txt'</span>);</span><br><span class="line">上句相当于获得了一个门把手，但是不知道门是否存在，若不存在的话就可以使用</span><br><span class="line">f.createNewFile()创建文件。</span><br></pre></td></tr></table></figure>

      
    </div>

    
      
      

  <div class="post-copyright">
    <p class="copyright-item">
      <span>Author: </span>
      <a href="https://corn1ng.github.io">corn1ng</a>
    </p>
    <p class="copyright-item">
      <span>Link: </span>
      <a href="https://corn1ng.github.io/2017/10/16/Java IO/">https://corn1ng.github.io/2017/10/16/Java IO/</a>
    </p>
    <p class="copyright-item">
      <span>License: </span>
      
      <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>
    </p>
  </div>



      
      
    

    
      <footer class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/Java基础/">Java基础</a>
            
          </div>
        
        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2017/10/17/logback/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">Logback 常用配置</span>
        <span class="prev-text nav-mobile">Prev</span>
      </a>
    
    
      <a class="next" href="/2017/10/12/Mybatis 映射/">
        <span class="next-text nav-default">Mybatis 映射</span>
        <span class="prev-text nav-mobile">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

      </footer>
    

  </article>


          </div>
          
  <div class="comments" id="comments">
    
  </div>


        </div>
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
        
          <a href="mailto:wangkangning1@foxmail.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
        
          <a href="http://github.com/corn1ng" class="iconfont icon-github" title="github"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
        
          <a href="https://www.instagram.com/brett0427/" class="iconfont icon-instagram" title="instagram"></a>
        
      
    
    
    
      
      <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
    
  </div>


<div class="copyright">
  

  <span class="copyright-year">
    
    &copy; 
     
      2017 - 
    
    2020

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">corn1ng</span>
  </span>
</div>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    
  
  

  



    
  





  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  
    <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  


    <script type="text/javascript" src="/js/src/even.js?v=2.6.0"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=2.6.0"></script>

    
    <script type="text/javascript"
    color="0,0,255" opacity='0.99' zIndex="-2" count="100" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>
    
  </body>
</html>
